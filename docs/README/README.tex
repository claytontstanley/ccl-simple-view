%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Simple Sectioned Essay Template
% LaTeX Template
%
% This template has been downloaded from:
% http://www.latextemplates.com
%
% Note:
% The \lipsum[#] commands throughout this template generate dummy text
% to fill the template out. These commands should all be removed when 
% writing essay content.
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%----------------------------------------------------------------------------------------
%	PACKAGES AND OTHER DOCUMENT CONFIGURATIONS
%----------------------------------------------------------------------------------------

\documentclass[12pt]{article} % Default font size is 12pt, it can be changed here

\usepackage{geometry} % Required to change the page size to A4
\geometry{a4paper} % Set the page size to be A4 as opposed to the default US Letter

\usepackage{graphicx} % Required for including pictures

\usepackage{float} % Allows putting an [H] in \begin{figure} to specify the exact location of the figure
\usepackage{wrapfig} % Allows in-line images such as the example fish picture

\usepackage{lipsum} % Used for inserting dummy 'Lorem ipsum' text into the template

\linespread{1.2} % Line spacing

%\setlength\parindent{0pt} % Uncomment to remove all indentation from paragraphs

\graphicspath{{./Pictures/}} % Specifies the directory where pictures are stored

\begin{document}

%----------------------------------------------------------------------------------------
%	TITLE PAGE
%----------------------------------------------------------------------------------------

\begin{titlepage}

\newcommand{\HRule}{\rule{\linewidth}{0.5mm}} % Defines a new command for the horizontal lines, change thickness here

\center % Center everything on the page

\textsc{\LARGE Rice University}\\[1.5cm] % Name of your university/college
\textsc{\Large Department of Psychology}\\[0.5cm] % Major heading such as course name
\textsc{\large Computer Human Interaction Laboratory (CHIL)}\\[0.5cm] % Minor heading such as course title


\HRule \\[0.4cm]
{ \huge \bfseries Lab Transition From MCL to Clozure Common Lisp}\\[0.4cm] % Title of your document
\HRule \\[1.5cm]

\begin{minipage}{0.4\textwidth}
\begin{flushleft} \large
\emph{Author:}\\
Clayton Stanley % Your name
\end{flushleft}
\end{minipage}
~
\begin{minipage}{0.4\textwidth}
\begin{flushright} \large
\emph{Supervisor:} \\
Dr. Mike Byrne % Supervisor's Name
\end{flushright}
\end{minipage}\\[4cm]

{\large \today}\\[3cm] % Date, change the \today to a set date if you want to be precise

%\includegraphics{Logo}\\[1cm] % Include a department/university logo - this will require the graphicx package

\vfill % Fill the rest of the page with whitespace

\end{titlepage}

%----------------------------------------------------------------------------------------
%	TABLE OF CONTENTS
%----------------------------------------------------------------------------------------

\tableofcontents % Include a table of contents

\newpage % Begins the essay on a new page instead of on the same page as the table of contents 

%----------------------------------------------------------------------------------------
%	INTRODUCTION
%----------------------------------------------------------------------------------------

\section{Introduction} % Major section

The purpose of this code is to enable Clozure Common Lisp to read in GUI source code written for Macintosh Common Lisp. This enables task environments written in MCL (e.g., Phaser, Votebox, NextGen) to work with CCL with minimal code modifications. 

\subsection{Design Notes}

Currently, three files are generated during the build to achieve this purpose:
\begin{enumerate}
\item ccl-simple-view.lisp: submodules/actr6/support
\item device.lisp: submodules/actr6/devices/ccl/device.lisp
\item uwi.lisp: submodules/actr6/devices/ccl/uwi.lisp
\end{enumerate}

1. provides the language layer for CCL, so that CCL can read in MCL gui source code. You'll see a subset of Digitool's GUI specification implemented for CCL in this file.

2. and 3. provide the ACT-R device for CCL, so that models that interacted with the task environments written for MCL can now work with CCL. These files are essentially copies of the analogous files for MCL, except at the top they require 1., so that the MCL language layer is available in CCL before the rest of the code is read in.

ccl-simple-view.lisp is a concatenation of many smaller .lisp files in this repo. This was done because I find it easier / more productive to work with many smaller files during development, but it's easier / more straightfoward to provide a single file that does a single purpose to the user. 

ccl-simple-view.lisp implements Digitool's GUI specification by levaraging CLozure's Objective C bridge and Apple's Cocoa framework. The majority of the structure of this file is written in CLOS style, and is built on top of Clozure's provided 'easygui' package. 

%----------------------------------------------------------------------------------------
%	MAJOR SECTION 1
%----------------------------------------------------------------------------------------

\section{Directory Structure} % Major section

\begin{itemize}

\item actr6: All .lisp files needed to build an ACT-R device for CCL that uses a Cocoa display. Note the share.lisp file lives here for now, which contains the MCL GUI interface for CCL

\item bincarbon: All original MCL bincarbon code. Just a few files have minor tweaks to work with CCL. Timer is broken on CCL currently though. Other files, like CFBundle.lisp don't work at all on CCL, but aren't necessary on CCL. The main goal for this folder is to document all changes to bincarbon files when migrating to CCL, while maintaining backwards compatibility with MCL.

\item binccl: CCL-specific utility files. Contains a CCL implementation of an interface for managing resource files (e.g., sounds, images)

\item build: Code to generate a single source file from current code in the repo.

\item docs: Archived documentation and reference manuals found online.

\item easygui: Any .lisp extensions to CCL's easygui package. Contains a few bug fixes, and an extension which provides a Cocoa view that does not respond to mouse activity	
\item rmcl: Any lisp code from RMCL that was either directly copied to this distro (some of the digitool GUI code could be bootstrapped after the CCL interface was defined) or rewritten for this distro (e.g., thermometer.lisp, the modal dialog implementation)

\item scratch: Stray lisp code, experimental, etc. None of this is loaded for any of the tests

\item submodules: Source code for actr and ccl
	\begin{itemize}
	\item actr is newest version (as of Jun 2012). All code is same except that loader files (loader.lisp) are inside each of the tutorial folders
	\item ccl is newest version (as of Jun 2012). Original image. Used to reference ccl src and run basic ccl core file
	\item lisp-dev is a git repo for building a custom ccl core that I use during development. I'm using some of the src for the utilities in the GUI code, so the builds here grab some of that src.
	\item rmcl is the newest version; no changes; used to reference rmcl src, and run rmcl for each of the tests.
	\end{itemize}

\item testing: Source code for testing the ccl code
	\begin{itemize}
	\item testCCLDevice.lisp: Used to test basic functionality of building a Cocoa display by writing lisp code that meets the uwi.lisp interface spec
	\item testTutorials.lisp: Runs ACT-R through all tutorials; checks that ACT-R can 'see' CCL's Cocoa device
	\item testImages.lisp: Tests that the CCL resources.lisp file correctly manages images
	\item testVotebox.lisp: Tests to run Votebox on CCL
	\item testPhaser.lisp: Tests to run Phaser on CCL
	\end{itemize}

\item tools: Various shell scripts and tools used to manage the repo
	\begin{itemize}
	\item merge-and-verify-driver. Used by git when I want to do a merge by hand.
	\end{itemize}

\end{itemize}

\section{To Run A Test}

\begin{itemize}
\item Mount RedGiant volume	
\item Navigate to the Projects/mcl-migration folder on RedGiant
\item Either access the data in the folder over the network (preferred), or copy the folder locally if you want to access it w/o internet.
\item Download Clozure CL from the App Store and install if you don't have it yet.
\item Launch Clozure CL
\item Use the Cocoa listener to load one of the test files.
\end{itemize}

e.g.: Launch Clozure CL, and then load Votebox in ./testing/testVotebox.lisp

\subsection{Notes about the Tests}

	Each test loads a bootstrap file, and then any necessary files to run that particular test.
		The bootstrap file (bootstrap.lisp) loads up ccl-simple-view and any shared lisp code that is needed to run a test file (particularly the unit test framework). 
		The necessary files to run the test are defined in ./testing/file-lists/[testName]/[testName].txt. If you wanted to bootstrap the test code manually, load each lisp file in the order in that file.




%----------------------------------------------------------------------------------------
%	MAJOR SECTION X - TEMPLATE - UNCOMMENT AND FILL IN
%----------------------------------------------------------------------------------------

%\section{Content Section}

%\subsection{Subsection 1} % Sub-section

% Content

%------------------------------------------------

%\subsection{Subsection 2} % Sub-section

% Content

%----------------------------------------------------------------------------------------
%	CONCLUSION
%----------------------------------------------------------------------------------------

\section{Conclusion} % Major section

\lipsum[12-13]

%----------------------------------------------------------------------------------------
%	BIBLIOGRAPHY
%----------------------------------------------------------------------------------------

\begin{thebibliography}{99} % Bibliography - this is intentionally simple in this template

\bibitem[Figueredo and Wolf, 2009]{Figueredo:2009dg}
Figueredo, A.~J. and Wolf, P. S.~A. (2009).
\newblock Assortative pairing and life history strategy - a cross-cultural
  study.
\newblock {\em Human Nature}, 20:317--330.
 
\end{thebibliography}

%----------------------------------------------------------------------------------------

\end{document}
