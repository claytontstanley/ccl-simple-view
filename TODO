contents-of-directory should be in utils
plug memory leaks
